<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>test</title>
</head>
<body>
<button id="btn">자식에게 메시지 보내기</button>
<iframe id="iframe" width="0" height="0" src="http://localhost:4242/asdf"></iframe>
<script>
    console.log("[parent] loaded");

    var btn = document.getElementById("btn");
    btn.addEventListener("click", function () {
        console.log("[parent] send message to iframe");
        var iframe = document.getElementById("iframe");
        iframe.contentWindow.postMessage("hello from parents", "http://localhost:4242");
    });

    window.addEventListener("message", function (e) {
        if (e.origin !== "http://localhost:4242") {
            console.log("[iframe] origin not matched:", e.origin);
            return;
        }
        console.log("[parent] message received:", e.data);
    });
</script>
</body>
</html>
